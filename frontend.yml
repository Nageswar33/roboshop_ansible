- name: install Nginx
  hosts: all
  become: true
  tasks:
    - name : install Nginx
      ansible.builtin.yum:
       name: nginx
       state: installe

    - name: Copy RoboShop Configuration - Main Config
      ansible.builtin.copy:
       src: nginx.conf
       dest: /etc/nginx/nginx.conf

    - name: Clean Old content
      ansible.builtin.file:
       path: /usr/share/nginx/html
       state: absent

    - name: Create App Directory
      ansible.builtin.file:
       path: /usr/share/nginx/html
       state: directory

    - name: download and extract content file
      ansible.builtin.unarchive:
      src: https://roboshop-artifacts.s3.amazonaws.com/frontend.zip
      dest: /usr/share/nginx/html
      remote_src: yes

    - name: enable nginx
      ansible.builtin.systemd:
        name: nginx
        state: restarted
        enable: yes

